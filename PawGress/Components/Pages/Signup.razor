@page "/signup"
@layout MainLayout
@using Microsoft.AspNetCore.Components.Forms
@using PawGress.Models
@inject NavigationManager Navigation

<link href="app.css" rel="stylesheet" />
<link href="auth.css" rel="stylesheet" />

<div class="auth-page">
    <div class="auth-card">
        <EditForm FormName="signupForm" Model="@newUser" OnValidSubmit="HandleSignup">
            <h1 class="auth-title">SIGN UP</h1>

            <InputText @bind-Value="newUser.Username" placeholder="Username" class="auth-input" />
            <InputText @bind-Value="newUser.Password" type="password" placeholder="Password" class="auth-input" />

            <button type="submit" class="auth-button">Sign Up</button>

            <p>Already have an account? <a href="/">Login</a></p>

            @if (!string.IsNullOrEmpty(message))
            {
                <p class="@messageClass">@message</p>
            }
        </EditForm>
    </div>
</div>

@code {
    private User newUser = new();
    private string message = string.Empty;
    private string messageClass = "success";

    private async Task HandleSignup()
    {
        message = "âœ… Signed up successfully! Redirecting...";
        messageClass = "success";
        await Task.Delay(1200);
        Navigation.NavigateTo("/");
    }
}
