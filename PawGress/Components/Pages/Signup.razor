@page "/signup"
@inject PawGress.Services.UserService UserService

<h3>Sign Up</h3>

<div>
    <label>Username:</label>
    <input @bind="username" placeholder="Enter username" />
</div>
<div>
    <label>Password:</label>
    <input type="password" @bind="password" placeholder="Enter password" />
</div>
<button @onclick="HandleSignup">Sign Up</button>

<p>@message</p>

@code {
    private string username = "";
    private string password = "";
    private string message = "";

    private async Task HandleSignup()
    {
        if (string.IsNullOrWhiteSpace(username) || string.IsNullOrWhiteSpace(password))
        {
            message = "Please enter username and password.";
            return;
        }

        var user = await UserService.CreateUserAsync(username, password);
        if (user != null)
        {
            message = $"User '{user.Username}' created successfully!";
        }
        else
        {
            message = "Signup failed.";
        }
    }
}
