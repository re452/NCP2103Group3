@page "/signup"
@layout MainLayout
@inject NavigationManager Navigation

<link href="app.css" rel="stylesheet" />
<link href="auth.css" rel="stylesheet" />

@code {
    private string message = string.Empty;
    private string messageClass = "error";

    protected override void OnInitialized()
    {
        var uri = Navigation.ToAbsoluteUri(Navigation.Uri);
        if (Microsoft.AspNetCore.WebUtilities.QueryHelpers.ParseQuery(uri.Query).TryGetValue("error", out var val))
        {
            if (val == "exists") message = "Username already exists.";
            else if (val == "empty") message = "Username and password are required.";
            else message = "Could not sign up.";
        }
    }
}

<div class="auth-page">
    <div class="auth-card">
        <h1 class="auth-title">SIGN UP</h1>

        <form method="post" action="/api/auth/register">
            <input name="username" placeholder="Username" class="auth-input" />
            <input name="password" type="password" placeholder="Password" class="auth-input" />
            <button type="submit" class="auth-button">Sign Up</button>
        </form>

        <p>Already have an account? <a href="/">Login</a></p>

        @if (!string.IsNullOrEmpty(message))
        {
            <p class="@messageClass">@message</p>
        }
    </div>
</div>
